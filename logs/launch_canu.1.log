-- canu 2.2
--
-- CITATIONS
--
-- For 'standard' assemblies of PacBio or Nanopore reads:
--   Koren S, Walenz BP, Berlin K, Miller JR, Phillippy AM.
--   Canu: scalable and accurate long-read assembly via adaptive k-mer weighting and repeat separation.
--   Genome Res. 2017 May;27(5):722-736.
--   http://doi.org/10.1101/gr.215087.116
-- 
-- Read and contig alignments during correction and consensus use:
--   Šošic M, Šikic M.
--   Edlib: a C/C ++ library for fast, exact sequence alignment using edit distance.
--   Bioinformatics. 2017 May 1;33(9):1394-1395.
--   http://doi.org/10.1093/bioinformatics/btw753
-- 
-- Overlaps are generated using:
--   Berlin K, et al.
--   Assembling large genomes with single-molecule sequencing and locality-sensitive hashing.
--   Nat Biotechnol. 2015 Jun;33(6):623-30.
--   http://doi.org/10.1038/nbt.3238
-- 
--   Myers EW, et al.
--   A Whole-Genome Assembly of Drosophila.
--   Science. 2000 Mar 24;287(5461):2196-204.
--   http://doi.org/10.1126/science.287.5461.2196
-- 
-- Corrected read consensus sequences are generated using an algorithm derived from FALCON-sense:
--   Chin CS, et al.
--   Phased diploid genome assembly with single-molecule real-time sequencing.
--   Nat Methods. 2016 Dec;13(12):1050-1054.
--   http://doi.org/10.1038/nmeth.4035
-- 
-- Contig consensus sequences are generated using an algorithm derived from pbdagcon:
--   Chin CS, et al.
--   Nonhybrid, finished microbial genome assemblies from long-read SMRT sequencing data.
--   Nat Methods. 2013 Jun;10(6):563-9
--   http://doi.org/10.1038/nmeth.2474
-- 
-- CONFIGURE CANU
--
-- Detected Java(TM) Runtime Environment '17.0.2' (from '/opt/linux/rocky/8.x/x86_64/pkgs/java/17.0.2/bin/java') without -d64 support.
-- Detected gnuplot version '5.2 patchlevel 4   ' (from 'gnuplot') and image format 'png'.
--
-- Detected 1 CPUs and 4096 gigabytes of memory on the local machine.
--
-- Detected Slurm with 'sinfo' binary in /opt/linux/rocky/8.x/x86_64/pkgs/slurm/23.02.2/bin/sinfo.
-- Detected Slurm with task IDs up to 2499 allowed.
-- 
-- Slurm support detected.  Resources available:
--     10 hosts with 256 cores and  438 GB memory.
--      8 hosts with 128 cores and  438 GB memory.
--      2 hosts with  64 cores and   97 GB memory.
--     18 hosts with 256 cores and  927 GB memory.
--      4 hosts with  32 cores and  900 GB memory.
--      4 hosts with  96 cores and  341 GB memory.
--      2 hosts with  96 cores and  438 GB memory.
--     31 hosts with  64 cores and  487 GB memory.
--      2 hosts with 256 cores and  900 GB memory.
--      2 hosts with  48 cores and  487 GB memory.
--     11 hosts with  64 cores and  194 GB memory.
--      2 hosts with  64 cores and  927 GB memory.
--      2 hosts with  32 cores and  111 GB memory.
--     53 hosts with  64 cores and  438 GB memory.
--      3 hosts with  64 cores and  900 GB memory.
--
-- I appear to be task 1 in a job array, unsetting SLURM_ARRAY_TASK_ID.
--
--                         (tag)Threads
--                (tag)Memory         |
--        (tag)             |         |  algorithm
--        -------  ----------  --------  -----------------------------
-- Grid:  meryl      6.000 GB    4 CPUs  (k-mer counting)
-- Grid:  hap        6.000 GB    4 CPUs  (read-to-haplotype assignment)
-- Grid:  cormhap    6.000 GB   16 CPUs  (overlap detection with mhap)
-- Grid:  obtovl     4.000 GB    8 CPUs  (overlap detection)
-- Grid:  utgovl     4.000 GB    8 CPUs  (overlap detection)
-- Grid:  cor        -.--- GB    4 CPUs  (read correction)
-- Grid:  ovb        4.000 GB    1 CPU   (overlap store bucketizer)
-- Grid:  ovs        8.000 GB    1 CPU   (overlap store sorting)
-- Grid:  red        8.000 GB    4 CPUs  (read error detection)
-- Grid:  oea        8.000 GB    1 CPU   (overlap error adjustment)
-- Grid:  bat       16.000 GB    4 CPUs  (contig construction with bogart)
-- Grid:  cns        -.--- GB    4 CPUs  (consensus)
--
-- Found untrimmed raw Nanopore reads in the input files.
--
-- I appear to be task  in a job array, unsetting SLURM_ARRAY_TASK_ID.
--
-- Generating assembly 'JDC5' in '/bigdata/stajichlab/shared/projects/BioCrusts/MossCrust/genomics/hybrid_assemblies/asm/canu/JDC5':
--   genomeSize:
--     32000000
--
--   Overlap Generation Limits:
--     corOvlErrorRate 0.3200 ( 32.00%)
--     obtOvlErrorRate 0.1200 ( 12.00%)
--     utgOvlErrorRate 0.1200 ( 12.00%)
--
--   Overlap Processing Limits:
--     corErrorRate    0.3000 ( 30.00%)
--     obtErrorRate    0.1200 ( 12.00%)
--     utgErrorRate    0.1200 ( 12.00%)
--     cnsErrorRate    0.2000 ( 20.00%)
--
--   Stages to run:
--     correct raw reads.
--     trim corrected reads.
--     assemble corrected and trimmed reads.
--
--
-- BEGIN CORRECTION
----------------------------------------
-- Starting command on Thu Jul 25 10:17:06 2024 with 91921.703 GB free disk space

    cd .
    ./JDC5.seqStore.sh \
    > ./JDC5.seqStore.err 2>&1

-- Finished on Thu Jul 25 10:23:40 2024 (394 seconds) with 91921.671 GB free disk space
----------------------------------------
--
-- In sequence store './JDC5.seqStore':
--   Found 1008189 reads.
--   Found 6400000332 bases (200 times coverage).
--    Histogram of raw reads:
--    
--    G=6400000332                       sum of  ||               length     num
--    NG         length     index       lengths  ||                range    seqs
--    ----- ------------ --------- ------------  ||  ------------------- -------
--    00010        13563     38689    640008485  ||       1000-3969       283509|----------------------------------------------------
--    00020        11310     90771   1280006799  ||       3970-6939       345786|---------------------------------------------------------------
--    00030         9869    151526   1920001049  ||       6940-9909       229573|------------------------------------------
--    00040         8758    220448   2560007934  ||       9910-12879       98987|-------------------
--    00050         7785    297965   3200006097  ||      12880-15849       34162|-------
--    00060         6876    385419   3840001825  ||      15850-18819       10453|--
--    00070         5971    485174   4480002157  ||      18820-21789        3193|-
--    00080         4992    602034   5120001488  ||      21790-24759        1231|-
--    00090         3769    747981   5760002106  ||      24760-27729         525|-
--    00100         1000   1008188   6400000332  ||      27730-30699         285|-
--    001.000x             1008189   6400000332  ||      30700-33669         140|-
--                                               ||      33670-36639          87|-
--                                               ||      36640-39609          62|-
--                                               ||      39610-42579          51|-
--                                               ||      42580-45549          31|-
--                                               ||      45550-48519          21|-
--                                               ||      48520-51489          16|-
--                                               ||      51490-54459          19|-
--                                               ||      54460-57429           9|-
--                                               ||      57430-60399          13|-
--                                               ||      60400-63369           8|-
--                                               ||      63370-66339           5|-
--                                               ||      66340-69309           5|-
--                                               ||      69310-72279           5|-
--                                               ||      72280-75249           2|-
--                                               ||      75250-78219           2|-
--                                               ||      78220-81189           2|-
--                                               ||      81190-84159           2|-
--                                               ||      84160-87129           1|-
--                                               ||      87130-90099           0|
--                                               ||      90100-93069           0|
--                                               ||      93070-96039           2|-
--                                               ||      96040-99009           0|
--                                               ||      99010-101979          0|
--                                               ||     101980-104949          0|
--                                               ||     104950-107919          0|
--                                               ||     107920-110889          0|
--                                               ||     110890-113859          0|
--                                               ||     113860-116829          0|
--                                               ||     116830-119799          1|-
--                                               ||     119800-122769          0|
--                                               ||     122770-125739          0|
--                                               ||     125740-128709          0|
--                                               ||     128710-131679          0|
--                                               ||     131680-134649          0|
--                                               ||     134650-137619          0|
--                                               ||     137620-140589          0|
--                                               ||     140590-143559          0|
--                                               ||     143560-146529          0|
--                                               ||     146530-149499          1|-
--    
----------------------------------------
-- Starting command on Thu Jul 25 10:23:45 2024 with 91921.671 GB free disk space

    cd correction/0-mercounts
    ./meryl-configure.sh \
    > ./meryl-configure.err 2>&1

-- Finished on Thu Jul 25 10:23:46 2024 (one second) with 91921.203 GB free disk space
----------------------------------------
--  segments   memory batches
--  -------- -------- -------
--        01  4.21 GB       4
--        02  3.35 GB       3
--        04  3.35 GB       2
--        06  2.23 GB       2
--        08  1.81 GB       2
--        12  1.37 GB       2
--        16  1.03 GB       2
--        20  0.82 GB       2
--        24  0.69 GB       2
--        32  0.52 GB       2
--        40  0.41 GB       2
--        48  0.35 GB       2
--        56  0.30 GB       2
--        64  0.26 GB       2
--
--  For 1008189 reads with 6400000332 bases, limit to 64 batches.
--  Will count kmers using 04 jobs, each using 5 GB and 4 threads.
--
-- Finished stage 'merylConfigure', reset canuIteration.
--
-- Running jobs.  First attempt out of 2.
--
-- 'meryl-count.jobSubmit-01.sh' -> job 5166178 tasks 1-4.
--
----------------------------------------
-- Starting command on Thu Jul 25 10:23:47 2024 with 91921.203 GB free disk space

    cd /bigdata/stajichlab/shared/projects/BioCrusts/MossCrust/genomics/hybrid_assemblies/asm/canu/JDC5
    sbatch \
      --depend=afterany:5166178 \
      --cpus-per-task=1 \
      --mem-per-cpu=4g \
      --time 24:00:00  \
      -D `pwd` \
      -J 'canu_JDC5' \
      -o canu-scripts/canu.01.out  canu-scripts/canu.01.sh
Submitted batch job 5166179

-- Finished on Thu Jul 25 10:23:47 2024 (in the blink of an eye) with 91921.203 GB free disk space
----------------------------------------
